<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Token Reward Calculator</title>
  </head>
  <body>
    <h1>Token Reward Calculator</h1>
    <form method="post">
      <label for="token_name">Token Name:</label>
      <input
        type="text"
        id="token_name"
        name="token_name"
        {% if custom_price_checked %} disabled {% endif %}
        required
      /><br /><br />

      <label>
        <input
          type="checkbox"
          id="custom_price_checkbox"
          name="custom_price_checkbox"
          {% if custom_price_checked %} checked {% endif %}
          onchange="toggleCustomPrice(this)"
        />
        Use custom token price
      </label><br /><br />

      <div id="custom_price_div" style="display: none;">
        <label for="custom_price">Custom Token Price ($):</label>
        <input
          type="number"
          step="0.0001"
          id="custom_price"
          name="custom_price"
          {% if custom_price_checked %} required {% endif %}
        /><br /><br />
      </div>

      <label for="tokens_offered">Tokens Offered:</label>
      <input
        type="number"
        id="tokens_offered"
        name="tokens_offered"
        required
      /><br /><br />

      <label for="your_sp_burn">Your SP Burn:</label>
      <input
        type="number"
        id="your_sp_burn"
        name="your_sp_burn"
        required
      /><br /><br />

      <label for="total_sp_burnt">Total SP Burnt:</label>
      <input
        type="number"
        id="total_sp_burnt"
        name="total_sp_burnt"
        required
      /><br /><br />

      <button type="submit">Calculate (1 request per minute)</button>
    </form>

    <script>
      function toggleCustomPrice(checkbox) {
        const customPriceDiv = document.getElementById("custom_price_div");
        const tokenNameInput = document.getElementById("token_name");

        if (checkbox.checked) {
          customPriceDiv.style.display = "block";
          tokenNameInput.disabled = true;
        } else {
          customPriceDiv.style.display = "none";
          tokenNameInput.disabled = false;
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        const checkbox = document.getElementById("custom_price_checkbox");
        toggleCustomPrice(checkbox);
      });
    </script>

    {% if error %}
    <p style="color: red;">{{ error }}</p>
    {% endif %}

    {% if token_name %}
    <h2>Results</h2>
    <p><strong>Token ID (If any):</strong> {{ token_name }}</p>
    <p><strong>Token Price:</strong> {{ token_price }}</p>
    <p><strong>Tokens Offered:</strong> {{ tokens_offered }}</p>
    <p><strong>Your SP Burn:</strong> {{ your_sp_burn }}</p>
    <p><strong>Total SP Burnt:</strong> {{ total_sp_burnt }}</p>
    <p><strong>Expected Reward:</strong> {{ reward }}</p>
    {% endif %}

    <footer style="margin-top: 50px; text-align: left; font-size: 14px; color: gray;">
      Made by <a href="https://x.com/0xOzp" target="_blank" style="color: gray; text-decoration: none;">@0xozp</a>
    </footer>
  </body>
</html>
